server {
    listen 80;

    # The root directory where all our files live.
    root /usr/share/nginx/html;

    # This tells Nginx to serve the main index.html file for root requests.
    index index.html;

    # --- THIS 'location' BLOCK IS FOR PAGE ROUTES ---
    # It handles requests for pages like /login, /signup, /dashboard, etc.
    location / {
        # 1. try_files tries to find a file that matches the exact URL ($uri).
        # 2. Then it tries to find a directory that matches ($uri/).
        # 3. If neither exists, it serves the /index.html file and lets React Router handle it.
        try_files $uri $uri/ /index.html;
    }

    # --- THIS 'location' BLOCK IS THE FIX ---
    # It specifically handles requests for static assets like JS, CSS, and images.
    # The tilde (~) makes it a case-insensitive regular expression match.
    # The regex looks for common file extensions.
    location ~* \.(?:jpg|jpeg|gif|png|ico|css|js)$ {
        # For these files, we want Nginx to look for them directly.
        # If it can't find them, it should return a 404 Not Found error,
        # NOT the index.html file. This is the key change.
        try_files $uri =404;
        
        # (Optional but good for performance) Tell browsers to cache these files for a long time.
        expires 1y;
        add_header Cache-Control "public";
    }
}